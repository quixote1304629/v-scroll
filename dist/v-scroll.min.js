var VScroll=function(e,t,n,r){"use strict";function a(e){return new Promise(function(t){setTimeout(t,e)})}t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r;var s={name:"VScroll",inheritAttrs:!1,components:{},mixins:[{props:{url:{type:String,require:!0,default:""},urlPageName:{type:String,require:!1,default:"page"},urlSizeName:{type:String,require:!1,default:"size"},dataPath:{type:String,require:!1,default:"payload.content"},totalPath:{type:String,require:!1,default:"payload.totalElements"},size:{type:Number,require:!1,default:10}},data:function(){return{thePage:{list:[],number:1,size:this.size,total:1,defaultFirstPage:1,defaultPageSize:10}}},computed:{},created:function(){},mounted:function(){},methods:{fetchData:function(){var e=n(t.mark(function e(){var n,s,i;return t.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n={})[this.urlPageName]=this.thePage.number,n[this.urlSizeName]=this.thePage.size,e.next=5,this.$axios.get(this.url,n);case 5:return s=e.sent,e.next=8,a(200);case 8:this.thePage.total=r(s.data,this.totalPath,0),i=r(s.data,this.dataPath,[]),1==this.thePage.number?this.thePage.list=i:this.thePage.list=this.thePage.list.concat(i),this.thePage.number++;case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),pullDownRefresh:function(){var e=n(t.mark(function e(){return t.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("pullDownRefresh"),this.thePage.number=1,e.next=4,this.fetchData();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),pullUpLoad:function(){var e=n(t.mark(function e(){return t.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("pullUpLoad"),!(this.thePage.list.length>=this.thePage.total)){e.next=3;break}return e.abrupt("return",!0);case 3:return e.next=5,this.fetchData();case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},watch:{url:{handler:function(e){this.thePage.number=1,this.fetchData()},immediate:!1}},destroyed:function(){}}],props:{},data:function(){return{}},computed:{},created:function(){},mounted:function(){},methods:{onRefresh:function(){var e=n(t.mark(function e(n){return t.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pullDownRefresh();case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),onInfinite:function(){var e=n(t.mark(function e(n){var r;return t.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pullUpLoad();case 2:r=e.sent,n(r);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},destroyed:function(){}};var i=function(e,t,n,r,a,s,i,o,l,u){"boolean"!=typeof i&&(l=o,o=i,i=!1);var c,d="function"==typeof n?n.options:n;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,a&&(d.functional=!0)),r&&(d._scopeId=r),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=c):t&&(c=i?function(){t.call(this,u(this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),c)if(d.functional){var f=d.render;d.render=function(e,t){return c.call(t),f(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,c):[c]}return n},o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var l=document.head||document.getElementsByTagName("head")[0],u={};var c=function(e){return function(e,t){return function(e,t){var n=o?t.media||"default":e,r=u[n]||(u[n]={ids:new Set,styles:[]});if(!r.ids.has(e)){r.ids.add(e);var a=t.source;if(t.map&&(a+="\n/*# sourceURL="+t.map.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",t.media&&r.element.setAttribute("media",t.media),l.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(a),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{var s=r.ids.size-1,i=document.createTextNode(a),c=r.element.childNodes;c[s]&&r.element.removeChild(c[s]),c.length?r.element.insertBefore(i,c[s]):r.element.appendChild(i)}}}(e,t)}};const d=s;var f=function(){var e=this,t=e.$createElement;return(e._self._c||t)("scroller",e._g(e._b({ref:"scroller",attrs:{"on-refresh":e.onRefresh,"on-infinite":e.onInfinite}},"scroller",e.$attrs,!1),e.$listeners),[e._t("default",null,{list:e.thePage.list,page:e.thePage})],2)};f._withStripped=!0;var p=i({render:f,staticRenderFns:[]},function(e){e&&e("data-v-3cd1f614_0",{source:"\n.v-scroll[data-v-3cd1f614] {\n}\r\n",map:{version:3,sources:["C:\\liyang\\project\\vue-component\\v-scroll\\src\\v-scroll.vue"],names:[],mappings:";AAwCA;AACA",file:"v-scroll.vue",sourcesContent:['<template>\r\n  <scroller\r\n    ref="scroller"\r\n    v-bind="$attrs"\r\n    v-on="$listeners"\r\n    :on-refresh="onRefresh"\r\n    :on-infinite="onInfinite">\r\n    <slot :list="thePage.list" :page="thePage"></slot>\r\n  </scroller>\r\n</template>\r\n\r\n<script>\r\nimport pagination from \'./mixins/pagination.js\'\r\nexport default {\r\n  name: \'VScroll\',\r\n  inheritAttrs: false,\r\n  components: {},\r\n  mixins: [pagination],\r\n  props: {},\r\n  data() {\r\n    return {}\r\n  },\r\n  computed: {},\r\n  created() {},\r\n  mounted() {},\r\n  methods: {\r\n    async onRefresh(done) {\r\n      await this.pullDownRefresh()\r\n      done()\r\n    },\r\n    async onInfinite(done) {\r\n      let infiniteRes = await this.pullUpLoad()\r\n      done(infiniteRes)\r\n    }\r\n  },\r\n  destroyed() {}\r\n}\r\n<\/script>\r\n\r\n<style scoped>\r\n.v-scroll {\r\n}\r\n</style>\r\n']},media:void 0})},d,"data-v-3cd1f614",!1,void 0,c,void 0);function h(e){h.installed||(h.installed=!0,e.component("VScroll",p))}var m={install:h},g=null;return"undefined"!=typeof window?g=window.Vue:"undefined"!=typeof global&&(g=global.Vue),g&&g.use(m),e.default=p,e.install=h,e}({},_regeneratorRuntime,_asyncToGenerator,_get);
